{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"H:\\\\PRACTICE\\\\sugarWebSite\\\\sugar\\\\components\\\\pubMedComponent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './components.css';\nexport function PubMedComponent() {\n  _s();\n\n  const {\n    0: countOfOverlap,\n    1: setCountOfOverlap\n  } = useState(0);\n  const {\n    0: listOfIdOverlaps,\n    1: setListOfIdOverlaps\n  } = useState([]);\n  const {\n    0: query,\n    1: setQuery\n  } = useState('sugar intake');\n  const {\n    0: inputSearchValue,\n    1: setInputSearchValue\n  } = useState('');\n  const {\n    0: selectedValueId,\n    1: setSelectedValueId\n  } = useState(listOfIdOverlaps[0]);\n  const apiPub = `http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&retmode=json&retmax=1000&term=${query.split(' ').join('+')}&field=title`;\n  const fetchMoreFromId = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=${selectedValueId}`;\n  const searchArticleById = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=${selectedValueId}&retmode=json`;\n  const {\n    0: isFoundArticle,\n    1: setIsFoundArticle\n  } = useState(false);\n  const {\n    0: articleText,\n    1: setArticleText\n  } = useState();\n  const {\n    0: articleCitation,\n    1: setArticleCitation\n  } = useState('');\n  useEffect(() => {\n    getDataFromSearch();\n  }, [query]);\n\n  const getDataFromSearch = async () => {\n    const response = await fetch(`https://cors-anywhere.herokuapp.com/${apiPub}`);\n    const res = await response.json(); // console.log(data.hits);\n\n    setCountOfOverlap(res.esearchresult.count);\n    setListOfIdOverlaps(res.esearchresult.idlist);\n  };\n\n  const changeInputSearch = e => {\n    setInputSearchValue(e.target.value);\n  };\n\n  const searchItemsByInputValue = e => {\n    e.preventDefault();\n    setCountOfOverlap(0);\n    setQuery(inputSearchValue);\n    setInputSearchValue('');\n  };\n\n  const searchItemsBySelectedId = async () => {\n    const data = await fetch(`https://cors-anywhere.herokuapp.com/${searchArticleById}`);\n    const res = await data.json();\n    const resultJson = res.result[selectedValueId]; // console.log(resultJson);\n\n    if (resultJson) {\n      const article = /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item_1_5 item_md_2 item_lg_3 flex-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"article_title\",\n          children: res.result[selectedValueId].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"article_date\",\n          children: res.result[selectedValueId].pubdate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"article_source\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"undescore\",\n            children: \"Source:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 47\n          }, this), \" \", res.result[selectedValueId].source]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"article_journal\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"undescore\",\n            children: \"From journal:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 48\n          }, this), \" \", res.result[selectedValueId].fulljournalname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"article_authors\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"undescore\",\n            children: \"Authors:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 48\n          }, this), \" \", res.result[selectedValueId].authors.map(el => el.name).join(', ')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 29\n      }, this);\n\n      setArticleText(article);\n      setIsFoundArticle(true);\n    } else {\n      const message = /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"notFound\",\n        children: \"Not found any information .. or it's private article\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 29\n      }, this);\n\n      setArticleText(message);\n      setIsFoundArticle(false);\n    }\n  };\n\n  const fetchMoreFromSelectedId = async () => {\n    const data = await fetch(`https://cors-anywhere.herokuapp.com/${fetchMoreFromId}`);\n    const res = await data.text();\n    let textCitation = ''; // console.log(res);\n\n    if (res) {\n      const text = res.split('abstract')[1];\n\n      if (text) {\n        textCitation = text.split('pmid')[0];\n      } else {\n        textCitation = text;\n      }\n    } else {\n      textCitation = \"Not found any citation\";\n    }\n\n    setArticleCitation(textCitation);\n  };\n\n  const setIdFromSelect = e => {\n    setSelectedValueId(e.target.value);\n    searchItemsBySelectedId();\n    fetchMoreFromSelectedId();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid_container zIndex\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"gradient_abs gradient_abs__top\",\n      src: '/img/gradients/gradient_blue.svg',\n      alt: \"gradient\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item_1_4 item_md_4 item_lg_4 mt3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Data from \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://http://www.ncbi.nlm.nih.gov\",\n            target: \"_blank\",\n            children: \"PubMed Central\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"boxShadow m0\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            action: \"\",\n            className: \"searchForm\",\n            onSubmit: searchItemsByInputValue,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"searchInput\",\n              onChange: e => changeInputSearch(e),\n              value: inputSearchValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"submitInputSearch\",\n              type: \"submit\",\n              children: \"Find\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"fz_middle\",\n            children: [\"There are now \", /*#__PURE__*/_jsxDEV(\"em\", {\n              className: \"undescore\",\n              children: countOfOverlap\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 64\n            }, this), \" overlaps according to search by phrase \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\"'\", query, \"'\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 36\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"fz_middle searchSelect_label\",\n            children: \"List of Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"selectTheId\",\n            id: \"\",\n            className: \"searchSelect\",\n            onChange: e => setIdFromSelect(e),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"0\",\n              children: \"-Select id-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 29\n            }, this), listOfIdOverlaps.map((el, ind) => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: el,\n                children: [ind, \"): \", el]\n              }, el, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 40\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"boxShadow item_fluid bg_light\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item_1_5 item_md_2 item_lg_3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: `searchItemTitle ${isFoundArticle ? 'colored_green' : 'colored_red'}`,\n            children: [\"PMED_ID: \", selectedValueId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this), articleText, articleCitation ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"articleCitation\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"undescore\",\n              children: \"Abstract:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 37\n            }, this), articleCitation]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 33\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"gradient_abs gradient_abs__bottom\",\n      src: '/img/gradients/gradient_blue.svg',\n      alt: \"gradient\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PubMedComponent, \"neynTkCC1sLVri2ULz/1oplDy0M=\");\n\n_c = PubMedComponent;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"PubMedComponent\");","map":{"version":3,"sources":["H:/PRACTICE/sugarWebSite/sugar/components/pubMedComponent.js"],"names":["React","useEffect","useState","PubMedComponent","countOfOverlap","setCountOfOverlap","listOfIdOverlaps","setListOfIdOverlaps","query","setQuery","inputSearchValue","setInputSearchValue","selectedValueId","setSelectedValueId","apiPub","split","join","fetchMoreFromId","searchArticleById","isFoundArticle","setIsFoundArticle","articleText","setArticleText","articleCitation","setArticleCitation","getDataFromSearch","response","fetch","res","json","esearchresult","count","idlist","changeInputSearch","e","target","value","searchItemsByInputValue","preventDefault","searchItemsBySelectedId","data","resultJson","result","article","title","pubdate","source","fulljournalname","authors","map","el","name","message","fetchMoreFromSelectedId","text","textCitation","setIdFromSelect","ind"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\n\r\nimport './components.css';\r\n\r\nexport function PubMedComponent() {\r\n\r\n    const [countOfOverlap, setCountOfOverlap] = useState(0);\r\n    const [listOfIdOverlaps, setListOfIdOverlaps] = useState([]);\r\n\r\n    const [query, setQuery] = useState('sugar intake');\r\n    const [inputSearchValue, setInputSearchValue] = useState('');\r\n    const [selectedValueId, setSelectedValueId] = useState(listOfIdOverlaps[0]);\r\n\r\n    const apiPub = `http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&retmode=json&retmax=1000&term=${query.split(' ').join('+')}&field=title`;\r\n    const fetchMoreFromId = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=${selectedValueId}`;\r\n    const searchArticleById = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=${selectedValueId}&retmode=json`;\r\n    const [isFoundArticle, setIsFoundArticle] = useState(false);\r\n    const [articleText, setArticleText] = useState();\r\n    const [articleCitation, setArticleCitation] = useState('');\r\n\r\n    useEffect(() => {\r\n        getDataFromSearch()\r\n    }, [query]);\r\n\r\n    const getDataFromSearch = async () => {\r\n        const response = await fetch(`https://cors-anywhere.herokuapp.com/${apiPub}`);\r\n        const res = await response.json();\r\n        // console.log(data.hits);\r\n        setCountOfOverlap(res.esearchresult.count);\r\n        setListOfIdOverlaps(res.esearchresult.idlist);\r\n    };\r\n\r\n    const changeInputSearch = (e) => {\r\n        setInputSearchValue(e.target.value)\r\n    };\r\n\r\n    const searchItemsByInputValue = (e) => {\r\n        e.preventDefault();\r\n        setCountOfOverlap(0);\r\n        setQuery(inputSearchValue);\r\n        setInputSearchValue('');\r\n    };\r\n\r\n    const searchItemsBySelectedId = async () => {\r\n        const data = await fetch(`https://cors-anywhere.herokuapp.com/${searchArticleById}`);\r\n        const res = await data.json();\r\n\r\n        const resultJson = res.result[selectedValueId];\r\n        // console.log(resultJson);\r\n        if (resultJson) {\r\n            const article = <div className=\"item_1_5 item_md_2 item_lg_3 flex-full\">\r\n                <h4 className=\"article_title\">{res.result[selectedValueId].title}</h4>\r\n                <p className=\"article_date\">{res.result[selectedValueId].pubdate}</p>\r\n                <p className=\"article_source\"><span\r\n                    className=\"undescore\">Source:</span> {res.result[selectedValueId].source}</p>\r\n                <p className=\"article_journal\"><span\r\n                    className=\"undescore\">From journal:</span> {res.result[selectedValueId].fulljournalname}</p>\r\n                <p className=\"article_authors\"><span\r\n                    className=\"undescore\">Authors:</span> {res.result[selectedValueId].authors.map(el => el.name).join(', ')}\r\n                </p>\r\n            </div>;\r\n            setArticleText(article);\r\n            setIsFoundArticle(true)\r\n        } else {\r\n            const message = <p className=\"notFound\">Not found any information .. or it's private article</p>\r\n            setArticleText(message);\r\n            setIsFoundArticle(false)\r\n        }\r\n    };\r\n\r\n    const fetchMoreFromSelectedId = async () => {\r\n        const data = await fetch(`https://cors-anywhere.herokuapp.com/${fetchMoreFromId}`);\r\n        const res = await data.text();\r\n        let textCitation = '';\r\n        // console.log(res);\r\n        if (res) {\r\n            const text = res.split('abstract')[1];\r\n            if (text) {\r\n                textCitation = text.split('pmid')[0];\r\n            } else {\r\n                textCitation = text\r\n            }\r\n        } else {\r\n            textCitation = \"Not found any citation\";\r\n        }\r\n        setArticleCitation(textCitation);\r\n    };\r\n\r\n    const setIdFromSelect = (e) => {\r\n        setSelectedValueId(e.target.value);\r\n        searchItemsBySelectedId();\r\n        fetchMoreFromSelectedId();\r\n    };\r\n\r\n    return (\r\n        <div className=\"grid_container zIndex\">\r\n            <img className=\"gradient_abs gradient_abs__top\" src={'/img/gradients/gradient_blue.svg'} alt=\"gradient\"/>\r\n            <div className=\"grid\">\r\n                <div className=\"item_1_4 item_md_4 item_lg_4 mt3\">\r\n                    <h2>Data from <a href=\"https://http://www.ncbi.nlm.nih.gov\" target=\"_blank\">PubMed Central</a>\r\n                    </h2>\r\n\r\n                    <div className=\"boxShadow m0\">\r\n                        <form action=\"\" className=\"searchForm\" onSubmit={searchItemsByInputValue}>\r\n                            <input type=\"text\" className=\"searchInput\" onChange={(e) => changeInputSearch(e)}\r\n                                   value={inputSearchValue}/>\r\n                            <button className=\"submitInputSearch\" type=\"submit\">Find</button>\r\n                        </form>\r\n\r\n                        <p className=\"fz_middle\">There are now <em className=\"undescore\">{countOfOverlap}</em> overlaps\r\n                            according to search by\r\n                            phrase <b>'{query}'</b></p>\r\n                        <p className=\"fz_middle searchSelect_label\">List of Id</p>\r\n                        <select name=\"selectTheId\" id=\"\" className=\"searchSelect\" onChange={(e) => setIdFromSelect(e)}>\r\n                            <option value=\"0\">-Select id-</option>\r\n                            {listOfIdOverlaps.map((el, ind) => {\r\n                                return <option key={el} value={el}>{ind}): {el}</option>\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                    <div className=\"boxShadow item_fluid bg_light\">\r\n                        <div className=\"item_1_5 item_md_2 item_lg_3\">\r\n                            <h3 className={`searchItemTitle ${isFoundArticle ? 'colored_green' : 'colored_red'}`}>PMED_ID: {selectedValueId}</h3>\r\n                            {articleText}\r\n                            {articleCitation ?\r\n                                <p className=\"articleCitation\">\r\n                                    <span className=\"undescore\">Abstract:</span>\r\n                                    {articleCitation}\r\n                                </p>\r\n                                : null}\r\n                        </div>\r\n                    </div>\r\n            </div>\r\n            <img className=\"gradient_abs gradient_abs__bottom\" src={'/img/gradients/gradient_blue.svg'} alt=\"gradient\"/>\r\n        </div>\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}